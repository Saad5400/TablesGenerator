import{d as B,t as J}from"./index.1a3d67a9.js";import{r as X,q as Q,v as G,c as Z}from"./scheduler.77b729c0.js";import{w as _,r as N}from"./index.ba4ffca8.js";function ce(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ee(e,t){J(e,1,1,()=>{t.delete(e.key)})}function le(e,t){e.f(),ee(e,t)}function de(e,t,u,l,m,i,n,f,c,p,v,$){let r=e.length,y=i.length,w=r;const b={};for(;w--;)b[e[w].key]=w;const o=[],L=new Map,g=new Map,M=[];for(w=y;w--;){const a=$(m,i,w),h=u(a);let s=n.get(h);s?l&&M.push(()=>s.p(a,t)):(s=p(h,a),s.c()),L.set(h,o[w]=s),h in b&&g.set(h,Math.abs(w-b[h]))}const S=new Set,E=new Set;function k(a){B(a,1),a.m(f,v),n.set(a.key,a),v=a.first,y--}for(;r&&y;){const a=o[y-1],h=e[r-1],s=a.key,d=h.key;a===h?(v=a.first,r--,y--):L.has(d)?!n.has(s)||S.has(s)?k(a):E.has(d)?r--:g.get(s)>g.get(d)?(E.add(s),k(a)):(S.add(d),r--):(c(h,n),r--)}for(;r--;){const a=e[r];L.has(a.key)||c(a,n)}for(;y;)k(o[y-1]);return X(M),o}const te=_(void 0);function fe(e,t){const{computePosition:u,autoUpdate:l,offset:m,shift:i,flip:n,arrow:f,size:c,autoPlacement:p,hide:v,inline:$}=Q(te),r={open:!1,autoUpdateCleanup:()=>{}},y=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let w;const b="https://www.skeleton.dev/utilities/popups";let o,L;function g(){o=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),L=o.querySelector(".arrow")??document.createElement("div")}g();function M(){var d,T,x,U,D,C,z,q;if(!o)throw new Error(`The data-popup="${t.target}" element was not found. ${b}`);if(!u)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${b}`);if(!m)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${b}`);if(!i)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${b}`);if(!n)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${b}`);if(!f)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${b}`);const s=[];c&&s.push(c((d=t.middleware)==null?void 0:d.size)),p&&s.push(p((T=t.middleware)==null?void 0:T.autoPlacement)),v&&s.push(v((x=t.middleware)==null?void 0:x.hide)),$&&s.push($((U=t.middleware)==null?void 0:U.inline)),u(e,o,{placement:t.placement??"bottom",middleware:[m(((D=t.middleware)==null?void 0:D.offset)??8),i(((C=t.middleware)==null?void 0:C.shift)??{padding:8}),n((z=t.middleware)==null?void 0:z.flip),f(((q=t.middleware)==null?void 0:q.arrow)??{element:L||null}),...s]}).then(({x:W,y:H,placement:K,middlewareData:V})=>{if(Object.assign(o.style,{left:`${W}px`,top:`${H}px`}),L){const{x:F,y:O}=V.arrow,Y={top:"bottom",right:"left",bottom:"top",left:"right"}[K.split("-")[0]];Object.assign(L.style,{left:F!=null?`${F}px`:"",top:O!=null?`${O}px`:"",right:"",bottom:"",[Y]:"-4px"})}})}function S(){o&&(r.open=!0,t.state&&t.state({state:r.open}),M(),o.style.display="block",o.style.opacity="1",o.style.pointerEvents="auto",o.removeAttribute("inert"),r.autoUpdateCleanup=l(e,o,M),w=Array.from(o==null?void 0:o.querySelectorAll(y)))}function E(s){if(!o)return;const d=parseFloat(window.getComputedStyle(o).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{r.open=!1,t.state&&t.state({state:r.open}),o.style.opacity="0",o.setAttribute("inert",""),r.autoUpdateCleanup&&r.autoUpdateCleanup(),s&&s()},d)}function k(){r.open===!1?S():E()}function a(s){if(r.open===!1||e.contains(s.target))return;if(o&&o.contains(s.target)===!1){E();return}const d=t.closeQuery===void 0?"a[href], button":t.closeQuery,T=o==null?void 0:o.querySelectorAll(d);T==null||T.forEach(x=>{x.contains(s.target)&&E()})}const h=s=>{if(r.open===!1)return;const d=s.key;if(d==="Escape"){s.preventDefault(),e.focus(),E();return}w=Array.from(o==null?void 0:o.querySelectorAll(y)),r.open&&document.activeElement===e&&(d==="ArrowDown"||d==="Tab")&&y.length>0&&w.length>0&&(s.preventDefault(),w[0].focus())};switch(t.event){case"click":e.addEventListener("click",k,!0),window.addEventListener("click",a,!0);break;case"hover":e.addEventListener("mouseover",S,!0),e.addEventListener("mouseleave",()=>E(),!0);break;case"focus-blur":e.addEventListener("focus",k,!0),e.addEventListener("blur",()=>E(),!0);break;case"focus-click":e.addEventListener("focus",S,!0),window.addEventListener("click",a,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${b}`)}return window.addEventListener("keydown",h,!0),M(),{update(s){E(()=>{t=s,M(),g()})},destroy(){e.removeEventListener("click",k,!0),e.removeEventListener("mouseover",S,!0),e.removeEventListener("mouseleave",()=>E(),!0),e.removeEventListener("focus",k,!0),e.removeEventListener("focus",S,!0),e.removeEventListener("blur",()=>E(),!0),window.removeEventListener("click",a,!0),window.removeEventListener("keydown",h,!0)}}}const ne={message:"Missing Toast Message",autohide:!0,timeout:5e3},R="toastStore";function pe(){const e=G(R);if(!e)throw new Error("toastStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return e}function me(){const e=se();return Z(R,e)}function oe(){const e=Math.random();return Number(e).toString(32)}function se(){const{subscribe:e,set:t,update:u}=_([]),l=i=>u(n=>{if(n.length>0){const f=n.findIndex(p=>p.id===i),c=n[f];c&&(c.callback&&c.callback({id:i,status:"closed"}),c.timeoutId&&clearTimeout(c.timeoutId),n.splice(f,1))}return n});function m(i){if(i.autohide===!0)return setTimeout(()=>{l(i.id)},i.timeout)}return{subscribe:e,close:l,trigger:i=>{const n=oe();return u(f=>{i&&i.callback&&i.callback({id:n,status:"queued"}),i.hideDismiss&&(i.autohide=!0);const c={...ne,...i,id:n};return c.timeoutId=m(c),f.push(c),f}),n},freeze:i=>u(n=>(n.length>0&&clearTimeout(n[i].timeoutId),n)),unfreeze:i=>u(n=>(n.length>0&&(n[i].timeoutId=m(n[i])),n)),clear:()=>t([])}}const I={};function P(e){return e==="local"?localStorage:sessionStorage}function A(e,t,u){const l=(u==null?void 0:u.serializer)??JSON,m=(u==null?void 0:u.storage)??"local";function i(n,f){P(m).setItem(n,l.stringify(f))}if(!I[e]){const n=_(t,p=>{const v=P(m).getItem(e);v&&p(l.parse(v));{const $=r=>{r.key===e&&p(r.newValue?l.parse(r.newValue):null)};return window.addEventListener("storage",$),()=>window.removeEventListener("storage",$)}}),{subscribe:f,set:c}=n;I[e]={set(p){i(e,p),c(p)},update(p){const v=p(Q(n));i(e,v),c(v)},subscribe:f}}return I[e]}A("modeOsPrefers",!1);A("modeUserPrefers",void 0);A("modeCurrent",!1);function we(){const e=window.matchMedia("(prefers-color-scheme: light)");function t(u){const l=document.documentElement.classList,m="dark";u===!0?l.remove(m):l.add(m)}t(e.matches),e.onchange=()=>{t(e.matches)}}const j="(prefers-reduced-motion: reduce)";function ie(){return window.matchMedia(j).matches}const he=N(ie(),e=>{{const t=l=>{e(l.matches)},u=window.matchMedia(j);return u.addEventListener("change",t),()=>{u.removeEventListener("change",t)}}});export{we as a,fe as b,ce as e,le as f,pe as g,me as i,he as p,te as s,de as u};
